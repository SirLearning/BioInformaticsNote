[[BioInformaticsNote/4Database/README]]

关系数据库基本概念
1. **数据模型**
	- **组成要素**：数据结构、数据操作、数据的完整性。
	- **基本分类**：层次模型、网状模型、关系数据模型、面向对象数据模型、Key/Value数据存储模式。
1. **关系和关系模式**
	- **关系**：唯一的数据结构是关系，一个关系对应一张二维表。
	- **关系模式**：描述关系的结构，包括属性和域。
1. **键**
	- **候选键**：能够唯一标识关系中每个元组的最小属性集。
	- **主键**：从候选键中选择的一个键。
	- 隐含键
	- 超键
	- 外键：参照关系、被参照关系
1. 关系的完整性
	- 关系模型的三要素：数据结构、关系操作、完整性约束
	- 完整性约束：实体完整性、参照完整性、用户定义的完整性
	- SQL：建立表结构和完整性约束
		- 创建新表、选择、插入、删除、更新（修改）
1. **关系的更新**
	- **插入**：增加新的元组。
	- **删除**：删除现有的元组。
	- **修改**：更新现有元组的某些属性值。

关系运算
1. 布尔运算：并、交、差、广义笛卡尔积、补、有效补
	- 并(Union)：关系R和S的并其结果由属于R或属于S的所有元组组成，其结果为一个新关系。记为：Q = R∪S = { t | t ∈R 或 t ∈ S}
	- 差( Difference)：关系R和S的差由属于R但不属于S的所有元组组成。记为： Q = R－S = { t | t ∈R 但 t Ï S}
	- 交(Intersection)：关系R和S的交其结果由既属于R又属于S的所有元组组成。 记为：Q = R∩S = { t | t ∈R 且 t ∈ S}
	- 广义笛卡尔积：关系R 和S的笛卡尔积为R中所有元组和S中所有元组的串接。
		- 结果关系的属性个数：k1+ k2，其中k1和k2分别为R和S的属性数
		- 结果关系的元组数：m×n，其中m、n分别为R和S的元组数
		- R和S的笛卡尔积记为：Q = R × S = {t |t =trts,tr∈R 且 ts∈S}
	- 补(Complement)：关系模式R(A1,A2,…,An)， R上的关系r。
		- 补运算：设dom(R)表示模式R上的所有元组的集合，则关系r的补为：r^_ = dom(R)－r
	- 有效补：
		- 关系模式R(A1,A2,…,An)，属性Ai的有效值域： adom(Ai,r)={ d | d∈Di，存在t∈r且t[Ai]=d }
		- 定义r的有效补为：r^~ ＝adom(R,r)－r
			- adom(R,r)为模式R上的所有属性对应关系r的有效值域组成的所有元组的集合。
			- 由于adom(R,r)是有限的，则r的有效补 r 总是一个关系。
		- 有效补的应用：当关系元组数比其有效补元组数多得多时，有效补可作为数据压缩手段。
1. **选择**：从关系中选择满足给定条件的元组
2. **投影**：从关系中选择某些属性列。
3. **连接**：将两个关系中的元组组合在一起。
	- 自然连接
	- $\theta$ 连接
1. **除法**：用于处理“包含”关系。

**函数依赖 (FD)**：
- 定义：设关系模式R(U)，X,Y ⊆ U，r是R(U)上的任一关系，如果对于任意t1、t2 ∈ r，t1[X] = t2[X] 有 t1[Y] = t2[Y]，称X函数决定Y，或Y函数依赖于X，记为：FD X→Y。
- 类型：
	- 平凡/非平凡的FD：设FD X→Y，如果YËX，则称 FD X→Y为非平凡的函数依赖；否则，若YÍX，称FD X→Y为平凡的函数依赖。
	- **完全依赖**：设FD X→Y，如果对任意的X' ⊂ X，X' → Y 都不成立，则称X→Y是完全函数依赖。对应部份依赖
	- **传递依赖**：设关系模式R，X、Y、Z 是R的属性子集，若FD X→Y，Y → X，Y→Z，则有FD X→Z，称FD X→Z为传递函数依赖。
- FD的逻辑蕴涵：设关系模式R(U,F)，X,YÍU，如果能从函数依赖集F推导出FD X→Y，则称 F逻辑蕴涵 FD X→Y，或称X→Y逻辑蕴涵于F。记为 F|= X→Y。
- 函数依赖公理：
	- Armstrong公理（三个公理）：设r是R(U)上的一个关系，X、Y、Z、W是U的子集。
		- A1. 自反律: 若YÍXÍU, 则 X→Y;
		- A2. 增广律: 若X→Y且ZÍU，则 XZ→YZ;
		- A3. 传递律: 若X→Y, Y→Z，则 X→Z.
	- 3个推论：
		- 推论1（合成规则）： 若X→Y，X→Z，则X→YZ
		- 推论2（分解规则）： 若X→Y且ZÍY，则X→Z
		- 推论3（伪传递规则）  若X→Y，YZ→W，则XZ→W
- 使用集
- 函数依赖集F的闭包 F$^+$
- 属性集X的闭包 X$^+$

关系数据库范式
- 概念：
	1. **1NF**：消除重复组，确保每个属性都是原子的。
	2. **2NF**：消除非主属性对主键的部分依赖。
	3. **3NF**：消除非主属性对主键的传递依赖。
	4. **BCNF (Boyce-Codd)**：消除任何非平凡且非函数依赖的决定因素。
- 定理1：若关系模式R(U,F)∈3NF，则R∈2NF
	- 关系模式的规范化算法：
		- 关系模式的分解
			- 无损连接性
		- LOSSNESS算法：判断分解ρ是否具有无损连接性
- 定理2：LOSSNESS算法能正确判断ρ分解是否是无损分解
	- 模式分解的特性及其判定算法
- 定理3：设关系模式R的一个分解ρ={R1，R2}，F是R上的函数依赖集。若F|=(R1 ∩R2)→(R1－R2) 或 F|=(R1 ∩R2) →（R2 －R1)，则ρ具有无损连接性。
